(function(a){var s,d,p,m,q,n,r,h,t,j,k,c,v,e,u,w,f="lien/lister",l,x=function(b){b.preventDefault();b.returnValue=!1;s=a('input[name="lien"]').val();a(this).val("Curl en Cours...");console.log(s);f="lien/lister";a.post("lien/recuperer_donnees",{lien:s},function(b){p=a("#content *");l=a("#content");l.fadeOut(200);p.remove();l.append(b);l.fadeIn(200);a(".form img").hide();a('.form input[type="radio"]').hide();a(".form img").first().show();a('.form input[type="radio"]').eq(0).attr("checked","checked");
u=a(".form img").length-1;e=0;a(".imgSelector").show().css({maxWidth:"45px","float":"right"});a(".form img").css({maxWidth:"45px",position:"absolute",top:"0.5em",left:"6.2em"})});document.title="CurLink-Ajout d'un lien"},y=function(b){b.preventDefault();b.returnValue=!1;q=a('.form input[checked="checked"]').val();m=a("#titre").val();n=a("#description").val();r=a('input[name="url"]').val();console.log(q,m,n,r);f="lien/ajouter";a.post(f,{image:q,titre:m,description:n,url:r},function(a){g(a)})},z=function(b){b.preventDefault();
b.returnValue=!1;m=a("#titre").val();c=a('input[name="id"]').val();n=a("#description").val();console.log(q,m,n,r);f="lien/modifier";a.post(f,{titre:m,description:n,id:c},function(a){g(a)})},A=function(b){b.preventDefault();b.returnValue=!1;f="lien/lister";a.get("lien/lister",{},function(a){g(a)})},B=function(b){b.preventDefault();b.returnValue=!1;f="lien/listerLienFollow";a.get("lien/listerLienFollow",{},function(a){g(a)});document.title="CurLink-Liens que je suis"},C=function(b){b.preventDefault();
b.returnValue=!1;f="lien/listerLienAt";a.get("lien/listerLienAt",{},function(a){g(a)});document.title="CurLink-Lien qui me citent"},D=function(b){b.preventDefault();b.returnValue=!1;h=a(this).attr("href");t=h.split("/");k=t.length-1;h=t[k];h=h.replace("?tag=","");console.log(h);f="lien/listerLienTag";a.get(f,{tag:h},function(a){g(a)})},E=function(b){b.preventDefault();b.returnValue=!1;f="lien/listerLienTag";a.get(f,{first:"first"},function(a){g(a)});document.title="CurLink-Lien par tag"},F=function(b){b.preventDefault();
b.returnValue=!1;c=a(this).attr("href");j=c.split("/");k=j.length-1;c=j[k];c=c.replace("?id_ami=","");console.log(c);v=a("this").prev("h1").text();a.get("membre/ajouterFollows",{id_ami:c});a(this).remove();a.post(f,{message:v},function(a){g(a)})},g=function(b){p=a("#content *");l=a("#content");l.fadeOut(200);p.remove();l.append(b);l.fadeIn(200)},G=function(b){b.preventDefault();b.returnValue=!1;a(".form img").eq(e).fadeOut(200);a('.form input[type="radio"]').eq(e).removeAttr("checked");0>e&&(e=u);
console.log(e);e--;a('.form input[type="radio"]').eq(e).attr("checked","checked");a(".form img").eq(e).fadeIn(200)},H=function(b){b.preventDefault();b.returnValue=!1;console.log(a('.form input[checked="checked"]').val());a(".form img").eq(e).fadeOut(200);a('.form input[type="radio"]').eq(e).removeAttr("checked");e>u-1&&(e=-1);console.log(e);e++;a('.form input[type="radio"]').eq(e).attr("checked","checked");a(".form img").eq(e).fadeIn(200)},I=function(b){b.preventDefault();b.returnValue=!1;a("#delete").remove();
c=a(this).attr("href");j=c.split("/");k=j.length-1;c=j[k];c=c.replace("supprimer?id=","");!1!=w&&(a("body").append('<div id="overlay"></div>'),a("#overlay").css({backgroundColor:"rgba(255,255,255,0.5)",display:"block",position:"absolute",top:0,left:0,zIndex:"3",height:a(document).height(),width:a(document).width()}),a(this).parent(".lien").append('<div id="delete"><p>Voulez vous supprimer ce lien?</p><a href="#" id="yes" class="btn">Oui</a><a href="#" id="no" class="btn">Non</a></div>'));w=!0},J=
function(b){b.preventDefault();b.returnValue=!1;a("#overlay").remove();console.log(c);a(this).parent("#delete").remove();a.get("lien/supprimer",{id:c},function(a){console.log(a);g(a)});a(this).parent(".lien").remove()},K=function(b){b.preventDefault();b.returnValue=!1;a(this).parent("#delete").remove();a("#overlay").remove()},L=function(b){b.preventDefault();b.returnValue=!1;c=a(this).attr("href");j=c.split("/");k=j.length-1;c=j[k];c=c.replace("editer?id=","");console.log(c);f="lien";a.get("lien/editer",
{id:c},function(a){console.log(a);g(a)});document.title="CurLink-Modification d'un lien"},M=function(b){b.preventDefault();b.returnValue=!1;h=a('input[name="tag"]').val();a.get("lien/listerLienTag",{tag:h},function(a){console.log(a);g(a)})},N=function(a){13==a.which&&(a.preventDefault(),a.returnValue=!1);console.log("clicked");x();return!1};a(function(){d=a("body");d.delegate('input[name="check"]',"click",x);d.delegate('input[name="submit"]',"click",y);d.delegate('input[name="edit"]',"click",z);d.delegate('a[name="editer"]',
"click",L);d.delegate("#follow","click",B);d.delegate("#named","click",C);d.delegate("#link","click",A);d.delegate("#linkTag","click",E);d.delegate(".tag","click",D);d.delegate(".followMember","click",F);d.delegate("#left","click",G);d.delegate("#right","click",H);d.delegate('a[name="supprimer"]',"click",I);d.delegate("#no","click",K);d.delegate("#yes","click",J);d.delegate('input[name="search"]',"click",M);d.delegate('input[name="lien"]',"keydown",N)})})(jQuery);